"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5680],{4770:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>l});var o=t(5893),r=t(1151);const a={title:"unstable_usePrompt",sidebar_position:void 0},s="unstable_usePrompt",i={id:"hooks/use-prompt",title:"unstable_usePrompt",description:"Type declaration",source:"@site/react-router/docs/hooks/use-prompt.md",sourceDirName:"hooks",slug:"/hooks/use-prompt",permalink:"/react-router-v6-searchable-docs/hooks/use-prompt",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1699022390,formattedLastUpdatedAt:"Nov 3, 2023",frontMatter:{title:"unstable_usePrompt"},sidebar:"tutorialSidebar",previous:{title:"useParams",permalink:"/react-router-v6-searchable-docs/hooks/use-params"},next:{title:"useResolvedPath",permalink:"/react-router-v6-searchable-docs/hooks/use-resolved-path"}},c={},l=[];function u(e){const n={a:"a",code:"code",h1:"h1",p:"p",pre:"pre",...(0,r.a)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"unstable_useprompt",children:(0,o.jsx)(n.code,{children:"unstable_usePrompt"})}),"\n",(0,o.jsxs)(t,{children:[(0,o.jsx)("summary",{children:"Type declaration"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:'declare function unstable_usePrompt({\n  when,\n  message,\n}: {\n  when: boolean | BlockerFunction;\n  message: string;\n}) {\n\ntype BlockerFunction = (args: {\n  currentLocation: Location;\n  nextLocation: Location;\n  historyAction: HistoryAction;\n}) => boolean;\n\ninterface Location<State = any> extends Path {\n  state: State;\n  key: string;\n}\n\ninterface Path {\n  pathname: string;\n  search: string;\n  hash: string;\n}\n\nenum HistoryAction {\n  Pop = "POP",\n  Push = "PUSH",\n  Replace = "REPLACE",\n}\n'})})]}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"unstable_usePrompt"})," hook allows you to prompt the user for confirmation via ",(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/confirm",children:(0,o.jsx)(n.code,{children:"window.confirm"})})," prior to navigating away from the current location."]}),"\n",(0,o.jsx)("docs-info",{children:(0,o.jsxs)(n.p,{children:["This only works for client-side navigations within your React Router application and will not block document requests. To prevent document navigations you will need to add your own ",(0,o.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeunload_event",target:"_blank",children:(0,o.jsx)(n.code,{children:"beforeunload"})})," event handler."]})}),"\n",(0,o.jsx)("docs-warning",{children:(0,o.jsxs)(n.p,{children:["Blocking a user from navigating is a bit of an anti-pattern, so please carefully consider any usage of this hook and use it sparingly. In the de-facto use case of preventing a user navigating away from a half-filled form, you might consider persisting unsaved state to ",(0,o.jsx)(n.code,{children:"sessionStorage"})," and automatically re-filling it if they return instead of blocking them from navigating away."]})}),"\n",(0,o.jsx)("docs-warning",{children:(0,o.jsxs)(n.p,{children:["We do not plan to remove the ",(0,o.jsx)(n.code,{children:"unstable_"})," prefix from this hook because the behavior is non-deterministic across browsers when the prompt is open, so React Router cannot guarantee correct behavior in all scenarios.  To avoid this non-determinism, we recommend using ",(0,o.jsx)(n.code,{children:"useBlocker"})," instead which also gives you control over the confirmation UX."]})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:'function ImportantForm() {\n  let [value, setValue] = React.useState("");\n\n  // Block navigating elsewhere when data has been entered into the input\n  unstable_usePrompt({\n    message: "Are you sure?",\n    when: ({ currentLocation, nextLocation }) =>\n      value !== "" &&\n      currentLocation.pathname !== nextLocation.pathname,\n  });\n\n  return (\n    <Form method="post">\n      <label>\n        Enter some important data:\n        <input\n          name="data"\n          value={value}\n          onChange={(e) => setValue(e.target.value)}\n        />\n      </label>\n      <button type="submit">Save</button>\n    </Form>\n  );\n}\n'})})]})}function d(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>i,a:()=>s});var o=t(7294);const r={},a=o.createContext(r);function s(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);
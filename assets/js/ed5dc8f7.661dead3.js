"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9617],{1951:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>c,metadata:()=>i,toc:()=>s});var o=t(5893),n=t(1151);const c={title:"StaticRouterProvider",new:!0,sidebar_position:void 0},a="<StaticRouterProvider>",i={id:"routers/static-router-provider",title:"StaticRouterProvider",description:"A ` accepts a router from createStaticRouter() and a context from createStaticHandler()` and renders your application on the server (i.e., Node or another Javascript runtime). For a more complete overview, please refer to the Server-Side Rendering guide.",source:"@site/react-router/docs/routers/static-router-provider.md",sourceDirName:"routers",slug:"/routers/static-router-provider",permalink:"/react-router-v6-searchable-docs/routers/static-router-provider",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1680118457,formattedLastUpdatedAt:"Mar 29, 2023",frontMatter:{title:"StaticRouterProvider",new:!0},sidebar:"tutorialSidebar",previous:{title:"RouterProvider",permalink:"/react-router-v6-searchable-docs/routers/router-provider"},next:{title:"Router Components",permalink:"/react-router-v6-searchable-docs/router-components/index"}},d={},s=[{value:"Type Declaration",id:"type-declaration",level:2},{value:"<code>context</code>",id:"context",level:2},{value:"<code>router</code>",id:"router",level:2},{value:"<code>hydrate</code>",id:"hydrate",level:2},{value:"<code>nonce</code>",id:"nonce",level:2}];function l(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.h1,{id:"staticrouterprovider",children:(0,o.jsx)(r.code,{children:"<StaticRouterProvider>"})}),"\n",(0,o.jsxs)(r.p,{children:["A ",(0,o.jsx)(r.code,{children:"<StaticRouterProvider>"})," accepts a ",(0,o.jsx)(r.code,{children:"router"})," from ",(0,o.jsx)(r.a,{href:"./create-static-router",children:(0,o.jsx)(r.code,{children:"createStaticRouter()"})})," and a ",(0,o.jsx)(r.code,{children:"context"})," from ",(0,o.jsx)(r.a,{href:"./create-static-handler",children:(0,o.jsx)(r.code,{children:"createStaticHandler()"})})," and renders your application on the server (i.e., ",(0,o.jsx)(r.a,{href:"https://nodejs.org/",children:"Node"})," or another Javascript runtime). For a more complete overview, please refer to the ",(0,o.jsx)(r.a,{href:"../guides/ssr",children:"Server-Side Rendering"})," guide."]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-jsx",metastring:"lines=[4,34-37]",children:'import {\n  createStaticHandler,\n  createStaticRouter,\n  StaticRouterProvider,\n} from "react-router-dom/server";\nimport Root, {\n  loader as rootLoader,\n  ErrorBoundary as RootBoundary,\n} from "./root";\n\nconst routes = [\n  {\n    path: "/",\n    loader: rootLoader,\n    Component: Root,\n    ErrorBoundary: RootBoundary,\n  },\n];\n\nexport async function renderHtml(req) {\n  let { query, dataRoutes } = createStaticHandler(routes);\n  let fetchRequest = createFetchRequest(req);\n  let context = await query(fetchRequest);\n\n  // If we got a redirect response, short circuit and let our Express server\n  // handle that directly\n  if (context instanceof Response) {\n    throw context;\n  }\n\n  let router = createStaticRouter(dataRoutes, context);\n  return ReactDOMServer.renderToString(\n    <React.StrictMode>\n      <StaticRouterProvider\n        router={router}\n        context={context}\n      />\n    </React.StrictMode>\n  );\n}\n'})}),"\n",(0,o.jsx)(r.h2,{id:"type-declaration",children:"Type Declaration"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-ts",children:"declare function StaticRouterProvider(props: {\n  context: StaticHandlerContext;\n  router: Router;\n  hydrate?: boolean;\n  nonce?: string;\n}: JSX.Element;\n"})}),"\n",(0,o.jsx)(r.h2,{id:"context",children:(0,o.jsx)(r.code,{children:"context"})}),"\n",(0,o.jsxs)(r.p,{children:["This is the ",(0,o.jsx)(r.code,{children:"context"})," returned from the ",(0,o.jsx)(r.code,{children:"createStaticHandler().query()"})," calls which contains all of the fetched data for the request."]}),"\n",(0,o.jsx)(r.h2,{id:"router",children:(0,o.jsx)(r.code,{children:"router"})}),"\n",(0,o.jsxs)(r.p,{children:["This is the router created via ",(0,o.jsx)(r.code,{children:"createStaticRouter"})]}),"\n",(0,o.jsx)(r.h2,{id:"hydrate",children:(0,o.jsx)(r.code,{children:"hydrate"})}),"\n",(0,o.jsxs)(r.p,{children:["By default, ",(0,o.jsx)(r.code,{children:"<StaticRouterProvider>"})," will stringify the required hydration data onto ",(0,o.jsx)(r.code,{children:"window.__staticRouterHydrationData"})," in a ",(0,o.jsx)(r.code,{children:"<script>"})," tag which will be read and automatically hydrated by ",(0,o.jsx)(r.code,{children:"createBrowserRouter()"}),"."]}),"\n",(0,o.jsxs)(r.p,{children:["If you wish to do more advanced hydration manually, you can pass ",(0,o.jsx)(r.code,{children:"hydrate={false}"})," to disable this automatic hydration. Client-side, you would then pass your own ",(0,o.jsx)(r.code,{children:"hydrationData"})," to ",(0,o.jsx)(r.code,{children:"createBrowserRouter"}),"."]}),"\n",(0,o.jsx)(r.h2,{id:"nonce",children:(0,o.jsx)(r.code,{children:"nonce"})}),"\n",(0,o.jsxs)(r.p,{children:["When leveraging automatic hydration, you may provide a ",(0,o.jsx)(r.code,{children:"nonce"})," value to be rendered onto the ",(0,o.jsx)(r.code,{children:"<script>"})," tag and used along with your ",(0,o.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src#unsafe_inline_script",children:"Content Security Policy"}),"."]}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.strong,{children:"See also:"})}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.a,{href:"./create-static-handler",children:(0,o.jsx)(r.code,{children:"createStaticHandler"})})}),"\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.a,{href:"./create-static-router",children:(0,o.jsx)(r.code,{children:"createStaticRouter"})})}),"\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.a,{href:"./create-browser-router",children:(0,o.jsx)(r.code,{children:"createBrowserRouter"})})}),"\n"]})]})}function u(e={}){const{wrapper:r}={...(0,n.a)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},1151:(e,r,t)=>{t.d(r,{Z:()=>i,a:()=>a});var o=t(7294);const n={},c=o.createContext(n);function a(e){const r=o.useContext(c);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),o.createElement(c.Provider,{value:r},e.children)}}}]);